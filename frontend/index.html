<!DOCTYPE html>
<html>
<head>
  <title>Onxy VMS - Video Management System</title>
  <link rel="stylesheet" href="./index.css">
</head>
<body>
  <!-- Main Layout -->
  <div class="main-layout">
    <!-- Left Sidebar -->
    <div class="sidebar">
      <!-- Sidebar Header -->
      <div class="sidebar-header">
        <div class="logo">
          <span>Onxy VMS</span>
        </div>
        <div class="status-indicator">
          <div class="status-dot"></div>
          <span>Live</span>
        </div>
      </div>

      <!-- Sidebar Tabs -->
      <div class="sidebar-tabs">
        <button class="tab active">Device</button>
        <button class="tab">Group</button>
      </div>

      <!-- Search -->
      <div class="search-container">
        <input type="text" class="search-box" placeholder="Alias, channel, IP, MAC">
      </div>

      <!-- Device List -->
      <div class="device-list">
        <div class="device-group">
          <div class="group-header">
            <span class="group-toggle">â–¼</span>
            <span>Default area</span>
          </div>
          <div id="device-items">
            <!-- Devices will be populated dynamically -->
          </div>
        </div>
      </div>

      <!-- Sidebar Controls -->
      <div class="sidebar-controls">
        <button id="add-camera-btn" class="control-btn">
          <span>â•</span>
          <span>ThÃªm Camera</span>
        </button>
        <button id="camera-list-btn" class="control-btn">
          <span>ğŸ“‹</span>
          <span>Danh sÃ¡ch</span>
        </button>
        <button id="record-history-btn" class="control-btn">
          <span>ğŸ“¼</span>
          <span>Lá»‹ch sá»­ ghi</span>
        </button>
        <button id="settings-btn" class="control-btn">
          <span>âš™ï¸</span>
          <span>CÃ i Ä‘áº·t</span>
        </button>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Top Toolbar -->
      <div class="top-toolbar">
        <div class="grid-controls">
          <button id="grid-1x1" class="grid-btn active" data-grid="1">1x1</button>
          <button id="grid-2x2" class="grid-btn" data-grid="2">2x2</button>
          <button id="grid-3x3" class="grid-btn" data-grid="3">3x3</button>
          <button id="grid-4x4" class="grid-btn" data-grid="4">4x4</button>
        </div>
        
        <div class="toolbar-right">
          <button class="toolbar-btn">
            <span>ğŸ“·</span>
            <span>Snapshot</span>
          </button>
          <button class="toolbar-btn">
            <span>ğŸ”</span>
            <span>PTZ</span>
          </button>
          <span class="page-indicator">1/1</span>
          <button class="toolbar-btn">
            <span>â­ï¸</span>
          </button>
        </div>
      </div>

      <!-- Video Container -->
      <div class="video-container">
        <div id="camera-grid" class="camera-grid grid-1x1">
          <!-- Grid slots will be populated dynamically -->
        </div>
      </div>
    </div>
  </div>

  <!-- Add Camera Modal -->
  <div id="add-camera-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>â• ThÃªm Camera Má»›i</h3>
        <button id="close-add-modal" class="close-btn">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="camera-name">TÃªn Camera:</label>
          <input type="text" id="camera-name" placeholder="VD: Camera 1, Camera Cá»­a chÃ­nh...">
        </div>
        <div class="form-group">
          <label for="camera-type">Loáº¡i káº¿t ná»‘i:</label>
          <select id="camera-type">
            <option value="whep">WHEP (WebRTC)</option>
            <option value="rtsp">RTSP Stream</option>
            <option value="hls">HLS Stream</option>
          </select>
        </div>
        <div class="form-group">
          <label for="camera-url">URL/Äá»‹a chá»‰:</label>
          <input type="text" id="camera-url" placeholder="VD: rtsp://192.168.1.100:554/stream hoáº·c http://localhost:8889/cam1/whep">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="camera-username">Username (tÃ¹y chá»n):</label>
            <input type="text" id="camera-username" placeholder="TÃªn Ä‘Äƒng nháº­p">
          </div>
          <div class="form-group">
            <label for="camera-password">Password (tÃ¹y chá»n):</label>
            <input type="password" id="camera-password" placeholder="Máº­t kháº©u">
          </div>
        </div>
      </div>
      <div class="modal-buttons">
        <button id="cancel-add-btn" class="cancel-btn">Há»§y</button>
        <button id="save-camera-btn" class="save-btn">ThÃªm Camera</button>
      </div>
    </div>
  </div>

  <!-- Camera List Modal -->
  <div id="camera-list-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ğŸ“‹ Danh sÃ¡ch Camera</h3>
        <button id="close-list-modal" class="close-btn">Ã—</button>
      </div>
      <div class="modal-body">
        <div id="camera-list-content">
          <!-- Camera list will be populated here -->
        </div>
      </div>
    </div>
  </div>


  <!-- Record History Modal -->
  <div id="record-history-modal" class="modal" style="display: none;">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h3>ğŸ“¼ Lá»‹ch sá»­ Ghi hÃ¬nh</h3>
        <button id="close-history-modal" class="close-btn">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="history-toolbar">
          <div class="history-stats">
            <span>Tá»•ng video: <strong id="history-count">0</strong></span>
            <span>Dung lÆ°á»£ng: <strong id="history-size">0 MB</strong></span>
          </div>
          <div class="history-actions">
            <button id="select-folder-btn" class="action-btn" style="background: #8b5cf6;">ğŸ“‚ Chá»n thÆ° má»¥c</button>
            <button id="export-history-btn" class="action-btn">ğŸ“¥ Táº£i táº¥t cáº£</button>
            <button id="clear-history-btn" class="action-btn secondary">ğŸ—‘ï¸ XÃ³a lá»‹ch sá»­</button>
          </div>
        </div>
        
        <div class="history-info" id="history-info" style="margin-bottom: 1rem; padding: 0.75rem; background: #f7fafc; border-radius: 6px; font-size: 0.875rem; color: #4a5568;">
          <span id="folder-info-history">ğŸ’¡ Nháº¥n "ğŸ“‚ Chá»n thÆ° má»¥c" Ä‘á»ƒ chá»n nÆ¡i lÆ°u file, hoáº·c nháº¥n "ğŸ’¾ Táº£i xuá»‘ng" Ä‘á»ƒ chá»n tá»«ng file</span>
        </div>
        
        <div class="history-list" id="history-list">
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ“¼</div>
            <p>ChÆ°a cÃ³ video nÃ o trong lá»‹ch sá»­</p>
            <small>CÃ¡c video Ä‘Ã£ ghi sáº½ Ä‘Æ°á»£c lÆ°u á»Ÿ Ä‘Ã¢y</small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>âš™ï¸ CÃ i Ä‘áº·t</h3>
        <button id="close-settings-modal" class="close-btn">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="setting-item">
          <label for="folder-select">LÆ°u trá»¯ tá»± Ä‘á»™ng (chá»‰ Chrome/Edge má»›i):</label>
          <div class="folder-select-container">
            <button id="folder-select-btn" class="folder-select-btn">Chá»n thÆ° má»¥c</button>
            <span id="folder-display" class="folder-display">ChÆ°a chá»n thÆ° má»¥c</span>
          </div>
          <small class="help-text">ğŸ’¡ Náº¿u khÃ´ng há»— trá»£, video sáº½ táº£i vá» Downloads vá»›i tÃªn file Ä‘Ã£ cáº¥u hÃ¬nh</small>
        </div>
        <div class="setting-item">
          <label for="filename-format">Äá»‹nh dáº¡ng tÃªn file:</label>
          <select id="filename-format">
            <option value="datetime">camera-X-YYYY-MM-DD-HH-mm-ss</option>
            <option value="timestamp">camera-X-timestamp</option>
            <option value="simple">camera-X-video-N</option>
          </select>
        </div>
        
        <div class="setting-section">
          <h4>ğŸ¥ CÃ i Ä‘áº·t Record Video</h4>
          <div class="setting-item">
            <label for="record-storage">NÆ¡i lÆ°u video record:</label>
            <select id="record-storage">
              <option value="download">Táº£i vá» thÆ° má»¥c Downloads</option>
              <option value="folder">LÆ°u vÃ o thÆ° má»¥c Ä‘Ã£ chá»n</option>
              <option value="upload">Tá»± Ä‘á»™ng upload lÃªn server</option>
            </select>
          </div>
          
          <div class="setting-item">
            <label>
              <input type="checkbox" id="auto-upload-recordings">
              Tá»± Ä‘á»™ng upload video record lÃªn server sau khi hoÃ n thÃ nh
            </label>
            <small class="help-text">ğŸ’¡ Video sáº½ Ä‘Æ°á»£c lÆ°u vÃ o server vÃ  cÃ³ thá»ƒ quáº£n lÃ½ qua "Quáº£n lÃ½ File"</small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./index.js"></script>

</body>
</html>